# noteè¨˜äº‹AIè‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 

## æ¦‚è¦

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ãƒ†ãƒ¼ãƒã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€Œå£²ã‚Œã‚‹noteè¨˜äº‹ã€ã‚’å…¨è‡ªå‹•ã§ç”Ÿæˆã—ã¾ã™ã€‚noteã®äººæ°—è¨˜äº‹ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’å­¦ç¿’ã—ãŸAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€ä»¥ä¸‹ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ï¼š

- **è¨˜äº‹æœ¬æ–‡**ï¼ˆç„¡æ–™éƒ¨åˆ†ãƒ»æœ‰æ–™éƒ¨åˆ†ï¼‰
- **ã‚¿ã‚¤ãƒˆãƒ«å€™è£œ**ï¼ˆè©•ä¾¡ã‚¹ã‚³ã‚¢ä»˜ãï¼‰
- **ä¾¡æ ¼ææ¡ˆ**ï¼ˆæ ¹æ‹ ä»˜ãï¼‰
- **CTA**ï¼ˆè¡Œå‹•å–šèµ·ï¼‰
- **XæŠ•ç¨¿æ–‡**ï¼ˆ3æœ¬ï¼‹ã‚¹ãƒ¬ãƒƒãƒ‰ï¼‰

## ç‰¹å¾´

### 1. noteã‚¹ã‚¿ã‚¤ãƒ«ã®å®Œå…¨å†ç¾

- **å£èª¿**: ã‚«ãƒ•ã‚§ã§å‘ã‹ã„åˆã£ã¦è©±ã™ã‚ˆã†ãªå¯¾è©±æ„Ÿ
- **æ§‹æˆ**: å…±æ„Ÿãƒ•ãƒƒã‚¯â†’çµè«–å…ˆå‡ºã—â†’ä½“é¨“è«‡â†’å†ç¾â†’åè«–â†’ã¾ã¨ã‚
- **ã‚¹ãƒãƒ›æœ€é©åŒ–**: 2-4è¡Œæ®µè½ã€ä¸€æ–‡æ”¹è¡Œã€ç®‡æ¡æ›¸ãæ´»ç”¨
- **ã‚²ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**: ç„¡æ–™éƒ¨åˆ†ã§ä¿¡é ¼ã€æœ‰æ–™éƒ¨åˆ†ã§å†ç¾æ€§

### 2. ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­è¨ˆ

- **Strategy Agent**: ç«¶åˆåˆ†æãƒ»USPãƒ»æ§‹æˆæ¡ˆ
- **Draft Agent**: ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨ã«åŸ·ç­†
- **Gate & Pricing Agent**: æœ‰æ–™åŒ–ä½ç½®ãƒ»ä¾¡æ ¼ææ¡ˆ
- **CTA Agent**: è¡Œå‹•å–šèµ·ã®ç”Ÿæˆ
- **Distribution Agent**: XæŠ•ç¨¿æ–‡ã®ç”Ÿæˆ
- **Editor Agent**: å“è³ªãƒã‚§ãƒƒã‚¯ãƒ»ä¿®æ­£ææ¡ˆ
- **Title Scorer Agent**: ã‚¿ã‚¤ãƒˆãƒ«è©•ä¾¡

### 3. å…¨è‡ªå‹•ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

1. **Strategy**: ç«¶åˆãƒ»USPãƒ»outlineãƒ»titles
2. **Title scoring**: ã‚¿ã‚¤ãƒˆãƒ«è©•ä¾¡ï¼†é¸å®š
3. **Draft**: å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç”Ÿæˆ
4. **Gate & pricing**: ã‚²ãƒ¼ãƒˆä½ç½®ãƒ»ä¾¡æ ¼ææ¡ˆ
5. **CTA**: CTAç”Ÿæˆ
6. **Editor QA**: å“è³ªãƒã‚§ãƒƒã‚¯ï¼†ä¿®æ­£
7. **Post-process**: Markdownæ•´å½¢ãƒ»åˆ†å‰²
8. **Distribution**: XæŠ•ç¨¿æ–‡ç”Ÿæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

## ä½¿ã„æ–¹

### 1. UIã‹ã‚‰å®Ÿè¡Œ

```
/articles/new
```

1. ã€ŒğŸ¤– å…¨è‡ªå‹•ã€ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ
2. ãƒ†ãƒ¼ãƒã‚’å…¥åŠ›ï¼ˆä¾‹: ã€Œnoteã§æœˆ5ä¸‡å††ç¨¼ãæ–¹æ³•ã€ï¼‰
3. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šï¼ˆä¾¡æ ¼å¸¯ã€XæŠ•ç¨¿æ–‡ã®ç”Ÿæˆãªã©ï¼‰
4. ã€Œå…¨è‡ªå‹•ã§ä½œæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ç”Ÿæˆå®Œäº†å¾Œã€Markdownã‚’ã‚³ãƒ”ãƒ¼ï¼†ãƒšãƒ¼ã‚¹ãƒˆ

### 2. ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰å®Ÿè¡Œ

```typescript
import { autoGenerateArticle } from '@/app/actions/article';

const result = await autoGenerateArticle('noteã§æœˆ5ä¸‡å††ç¨¼ãæ–¹æ³•', {
  includeDistribution: true,
  priceTier: 'standard',
});

if (result.success) {
  console.log('è¨˜äº‹ID:', result.articleId);
  console.log('ã‚¿ã‚¤ãƒˆãƒ«:', result.result.title);
  console.log('ä¾¡æ ¼:', result.result.price);
}
```

## ç”Ÿæˆã•ã‚Œã‚‹æˆæœç‰©

### 1. Markdown

- **combined.md**: `[PAYWALL]`ãƒãƒ¼ã‚«ãƒ¼å…¥ã‚Šï¼ˆnoteã«è²¼ã‚Šä»˜ã‘ç”¨ï¼‰
- **free.md**: ç„¡æ–™éƒ¨åˆ†ã®ã¿
- **paid.md**: æœ‰æ–™éƒ¨åˆ†ã®ã¿

### 2. ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

```json
{
  "title": "é¸å®šã•ã‚ŒãŸã‚¿ã‚¤ãƒˆãƒ«",
  "price": 1200,
  "paywallIndex": 3,
  "wordCount": {
    "total": 6500,
    "free": 4000,
    "paid": 2500
  },
  "metrics": {
    "questionCount": 8,
    "sectionCount": 6,
    "checklistItems": 12
  },
  "qualityScore": 87
}
```

### 3. XæŠ•ç¨¿æ–‡ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```json
{
  "posts": [
    {
      "timing": "immediate",
      "pattern": "problem",
      "text": "æŠ•ç¨¿æ–‡1",
      "imageText": "ç”»åƒç”¨ãƒ†ã‚­ã‚¹ãƒˆ"
    },
    {
      "timing": "6hours",
      "pattern": "result",
      "text": "æŠ•ç¨¿æ–‡2",
      "imageText": "ç”»åƒç”¨ãƒ†ã‚­ã‚¹ãƒˆ"
    },
    {
      "timing": "nextday",
      "pattern": "empathy",
      "text": "æŠ•ç¨¿æ–‡3",
      "imageText": "ç”»åƒç”¨ãƒ†ã‚­ã‚¹ãƒˆ"
    }
  ],
  "thread": ["ã‚¹ãƒ¬ãƒƒãƒ‰1", "ã‚¹ãƒ¬ãƒƒãƒ‰2", ...],
  "hashtags": ["#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°1", "#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°2"]
}
```

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
packages/ai/src/agents/
â”œâ”€â”€ prompts/
â”‚   â””â”€â”€ noteStyle.ts          # å…±é€šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ articleStrategyAgent.ts   # æˆ¦ç•¥ç«‹æ¡ˆ
â”œâ”€â”€ articleDraftAgent.ts      # åŸ·ç­†
â”œâ”€â”€ gateAndPricingAgent.ts    # ã‚²ãƒ¼ãƒˆï¼†ä¾¡æ ¼
â”œâ”€â”€ ctaAgent.ts               # CTAç”Ÿæˆ
â”œâ”€â”€ distributionAgent.ts      # XæŠ•ç¨¿æ–‡ç”Ÿæˆ
â”œâ”€â”€ editorAgent.ts            # å“è³ªãƒã‚§ãƒƒã‚¯
â”œâ”€â”€ titleScorerAgent.ts       # ã‚¿ã‚¤ãƒˆãƒ«è©•ä¾¡
â”œâ”€â”€ articlePipeline.ts        # å…¨å·¥ç¨‹çµ±åˆ
â””â”€â”€ index.ts                  # ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

apps/web/app/
â”œâ”€â”€ actions/article.ts        # Server Actions
â””â”€â”€ articles/new/
    â”œâ”€â”€ page.tsx              # UIã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
    â””â”€â”€ _components/
        â”œâ”€â”€ ArticleWorkflow.tsx      # æ‰‹å‹•ãƒ¢ãƒ¼ãƒ‰
        â””â”€â”€ AutoGeneratePanel.tsx    # å…¨è‡ªå‹•ãƒ¢ãƒ¼ãƒ‰

packages/db/src/
â””â”€â”€ schema.ts                 # articlesãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µ
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
User Input (theme)
  â†“
autoGenerateArticle (Server Action)
  â†“
generateNoteArticle (Pipeline)
  â†“
[Strategy â†’ Title â†’ Draft â†’ Gate â†’ CTA â†’ Editor â†’ Post-process â†’ Distribution]
  â†“
DBä¿å­˜ (articles table)
  â†“
exportNoteMarkdown (Server Action)
  â†“
UIè¡¨ç¤º (Markdown preview)
```

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### 1. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®èª¿æ•´

`packages/ai/src/agents/prompts/noteStyle.ts`ã‚’ç·¨é›†ï¼š

- å£èª¿ãƒ»ãƒˆãƒ¼ãƒ³ã®å¤‰æ›´
- æ§‹æˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è¿½åŠ 
- CTAãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¿½åŠ 

### 2. ä¾¡æ ¼è¨­å®šãƒ­ã‚¸ãƒƒã‚¯

`packages/ai/src/agents/gateAndPricingAgent.ts`ã‚’ç·¨é›†ï¼š

- ä¾¡æ ¼ãƒ¬ãƒ³ã‚¸ã®èª¿æ•´
- åˆ¤æ–­åŸºæº–ã®å¤‰æ›´

### 3. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¿½åŠ 

æ–°ã—ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹å ´åˆï¼š

1. `packages/ai/src/agents/yourAgent.ts`ã‚’ä½œæˆ
2. `packages/ai/src/agents/index.ts`ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
3. `packages/ai/src/agents/articlePipeline.ts`ã«çµ±åˆ

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ç”Ÿæˆã«å¤±æ•—ã™ã‚‹

- OpenRouterã®APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ã¦ã„ãªã„ã‹ç¢ºèª
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèªï¼ˆ`console.log`ã§å‡ºåŠ›ï¼‰

### å“è³ªã‚¹ã‚³ã‚¢ãŒä½ã„

- `editorAgent`ã®ä¿®æ­£ãƒ‘ãƒƒãƒã‚’ç¢ºèª
- `strictFormatting`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’`true`ã«è¨­å®š

### ä¾¡æ ¼ãŒé©åˆ‡ã§ãªã„

- `priceTier`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’èª¿æ•´
- `gateAndPricingAgent`ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç¢ºèª

## ä»Šå¾Œã®æ‹¡å¼µ

### Phase 2: æ”¹å–„

- A/Bè‡ªå‹•ææ¡ˆ
- ãƒ¡ãƒˆãƒªã‚¯ã‚¹ä¿å­˜â†’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- å‹ã¡ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å­¦ç¿’

### Phase 3: æ‹¡å¼µ

- æ¥­ç•Œåˆ¥ãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆæŠ•è³‡/æ•™è‚²/ãƒ©ã‚¤ãƒ•ãƒãƒƒã‚¯ï¼‰
- ç”»åƒç”Ÿæˆã®çµ±åˆ
- note APIé€£æºï¼ˆè‡ªå‹•æŠ•ç¨¿ï¼‰

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã§ã™ã€‚

